<!DOCTYPE html>

<html>
<head>
  <title>internal.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="ChartMain.html">
                  ChartMain.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="index.html">
                  index.js
                </a>
              
                
                <a class="source" href="internal.html">
                  internal.js
                </a>
              
                
                <a class="source" href="internalArea.html">
                  internalArea.js
                </a>
              
                
                <a class="source" href="internalBar.html">
                  internalBar.js
                </a>
              
                
                <a class="source" href="internalBarLeft.html">
                  internalBarLeft.js
                </a>
              
                
                <a class="source" href="internalDonutChart.html">
                  internalDonutChart.js
                </a>
              
                
                <a class="source" href="internalLine.html">
                  internalLine.js
                </a>
              
                
                <a class="source" href="internalScatter.html">
                  internalScatter.js
                </a>
              
                
                <a class="source" href="internalWaffle.html">
                  internalWaffle.js
                </a>
              
                
                <a class="source" href="AreaChart.html">
                  AreaChart.js
                </a>
              
                
                <a class="source" href="BarChart.html">
                  BarChart.js
                </a>
              
                
                <a class="source" href="BarChartLeft.html">
                  BarChartLeft.js
                </a>
              
                
                <a class="source" href="DonutChart.html">
                  DonutChart.js
                </a>
              
                
                <a class="source" href="LineChart.html">
                  LineChart.js
                </a>
              
                
                <a class="source" href="ScatterChart.html">
                  ScatterChart.js
                </a>
              
                
                <a class="source" href="WaffleChart.html">
                  WaffleChart.js
                </a>
              
                
                <a class="source" href="charts.html">
                  charts.js
                </a>
              
                
                <a class="source" href="data.html">
                  data.js
                </a>
              
                
                <a class="source" href="errors.html">
                  errors.js
                </a>
              
                
                <a class="source" href="themes.html">
                  themes.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>internal.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>This is required for d3 to load.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* global d3 */</span>

<span class="hljs-keyword">import</span> utils <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/utils'</span>;

<span class="hljs-keyword">const</span> Internal = {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Creates a d3 element and assigns it to our internal ‘element’ property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function selectElement
  @description Creates a d3 element and assigns it to our internal 'element' property
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  selectElement(context) {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Use d3 to select the DOM element where the chart
will be drawn. Set the element to our chart’s ‘element’ property</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    context.element = d3.select(context.location);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Obtains the height and width of the containing element.
If the width is 0, the width of the window is used.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function getParentDimensions
  @description Obtains the height and width of the containing element. If the width is 0, the width of the window is used.
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  getParentDimensions(context) {
    context.setParentHeight = <span class="hljs-built_in">parseInt</span>(d3.select(context.location).style(<span class="hljs-string">'height'</span>), <span class="hljs-number">10</span>) || <span class="hljs-built_in">window</span>.innerHeight;
    context.setParentWidth = <span class="hljs-built_in">parseInt</span>(d3.select(context.location).style(<span class="hljs-string">'width'</span>), <span class="hljs-number">10</span>) || <span class="hljs-built_in">window</span>.innerWidth;

    context.element.style(<span class="hljs-string">'height'</span>, <span class="hljs-string">`<span class="hljs-subst">${context._parentHeight}</span>px`</span>);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Calculates the height and width of the chart according
to the size of the containing element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function getChartDimensions
  @description Calculates the height and width of the chart according to the size of the containing element
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>
  getChartDimensions(context) {
    context.setChartWidth = <span class="hljs-number">0.9</span> * context.getParentWidth;
    context.setChartHeight = <span class="hljs-number">0.8</span> * context.getParentHeight;

    context.setMargins = {
      top: <span class="hljs-number">0.1</span> * context.getParentHeight,
      right: <span class="hljs-number">0.05</span> * context.getParentWidth,
      bottom: <span class="hljs-number">0.1</span> * context.getParentHeight,
      left: <span class="hljs-number">0.05</span> * context.getParentWidth,
    };

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Creates the main SVG element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function createSVGElement
  @description Creates the main SVG element
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  createSVGElement(context) {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Appends the SVG to our chart element.
Sets the width and height of the SVG.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    context.translateX = (context.getParentWidth / <span class="hljs-number">2</span>) - (context.getChartWidth / <span class="hljs-number">2</span>);

    context.translateY = (context.getParentHeight / <span class="hljs-number">2</span>) - (context.getChartHeight / <span class="hljs-number">2</span>);
    context.container = context.element.append(<span class="hljs-string">'div'</span>)
                                       .style({
                                         <span class="hljs-string">'display'</span>: <span class="hljs-string">'inline-block'</span>,
                                         <span class="hljs-string">'position'</span>: <span class="hljs-string">'relative'</span>,
                                         <span class="hljs-string">'width'</span>: <span class="hljs-string">'100%'</span>,
                                         <span class="hljs-string">'vertical-align'</span>: <span class="hljs-string">'middle'</span>,
                                         <span class="hljs-string">'overflow'</span>: <span class="hljs-string">'hidden'</span>,
                                       });
    context.svg = context.container
                          .append(<span class="hljs-string">'svg'</span>)
                          .attr(<span class="hljs-string">'width'</span>, <span class="hljs-string">'100%'</span>)
                          .attr(<span class="hljs-string">'height'</span>, <span class="hljs-string">'100%'</span>)
                          .attr(<span class="hljs-string">'viewBox'</span>, () =&gt; { <span class="hljs-keyword">return</span> <span class="hljs-string">`0 0 <span class="hljs-subst">${context.getParentWidth}</span> <span class="hljs-subst">${context.getParentHeight}</span>`</span>; })
                          .attr(<span class="hljs-string">'preserveAspectRatio'</span>, <span class="hljs-string">'xMinYMin meet'</span>)
                          .append(<span class="hljs-string">'g'</span>)
                          .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">`translate(<span class="hljs-subst">${context.translateX}</span>, <span class="hljs-subst">${context.translateY}</span>)`</span>);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Updates the main SVG element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateSVGElement
  @description Updates the main SVG element
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateSVGElement(context) {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Select current SVG element and tpdates the width and height of the SVG.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    context.element.select(<span class="hljs-string">'svg'</span>)
           .attr(<span class="hljs-string">'width'</span>, context.getChartWidth + context.getMargins.left + context.getMargins.right)
           .attr(<span class="hljs-string">'height'</span>, context.getChartHeight + context.getMargins.top + context.getMargins.bottom)
           .append(<span class="hljs-string">'g'</span>)
           .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'translate('</span> + context.getMargins.left + <span class="hljs-string">','</span> + context.getMargins.top + <span class="hljs-string">')'</span>);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Creates a d3 x-axis using the appropriate scale and orientation
for this chart instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function createxAxis
  @description Creates d3 x-axis
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  createxAxis(context) {
    context.xAxis = d3.svg.axis()
                      .scale(context.xScale)
                      .orient(context.getxAxisOrientation)
                      .ticks(<span class="hljs-number">6</span>);
    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Creates a d3 y-axis using the appropriate scale and orientation
for this chart instance</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-comment">/*
  @private
  @function createyAxis
  @description Creates d3 y-axis
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  createyAxis(context) {
    <span class="hljs-comment">/*
    Builds y-axis using the appropriate scale and orientation.
    */</span>
    context.yAxis = d3.svg.axis()
                      .scale(context.yScale)
                      .orient(context.getyAxisOrientation);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Updates y-axis using the new scale. Used when user
updates some chart property that requires recreation
of axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateYAxisScale
  @description Updates the up the y-axis scale
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateYAxisScale(context) {
    context.yAxis = d3.svg.axis()
                      .scale(context.yScale)
                      .orient(context.getyAxisOrientation);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Updates x-axis using the new scale. Used when user
updates some chart property that requires recreation
of axis.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateXAxisScale
  @description Updates the up the x-axis scale
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateXAxisScale(context) {
    context.xAxis = d3.svg.axis()
                      .scale(context.xScale)
                      .orient(context.getxAxisOrientation);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Builds up the x-axis. Sets the class property, transforms
the height to the bottom of graph, and appends an axis label.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function buildXAxis
  @description Builds up the x-axis
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  buildXAxis(context) {
    context.svg.append(<span class="hljs-string">'g'</span>)
               .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'x axis'</span>)
               .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'translate(0, '</span> + context.getChartHeight + <span class="hljs-string">')'</span>)
               .call(context.xAxis)
               .append(<span class="hljs-string">'text'</span>)
               .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'x-axis-label'</span>)
               .attr(<span class="hljs-string">'x'</span>, context.getChartWidth * <span class="hljs-number">0.5</span>)
               .attr(<span class="hljs-string">'y'</span>, <span class="hljs-number">35</span>)
               .style(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'middle'</span>)
               .text(context.getxAxisLabel);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Translates the x-axis to the right location</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateXAxisPosition
  @description Translates the x-axis
  @param {Object} context (chart instance)
  @returns {Object} contextsetXscale (chart instance)
  */</span>

  updateXAxisPosition(context) {
    context.element
           .select(<span class="hljs-string">'svg'</span>)
           .select(<span class="hljs-string">'g .x.axis'</span>)
           .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'translate(0, '</span> + context.getChartHeight + <span class="hljs-string">')'</span>);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Builds up the y-axis. Sets the class property, rotates
the position to be to left of graph, and appends an axis label</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function buildYAxis
  @description Builds up the y-axis and adds the label
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>
  buildYAxis(context) {
    context.svg.append(<span class="hljs-string">'g'</span>)
           .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'y axis'</span>)
           .call(context.yAxis)
           .append(<span class="hljs-string">'text'</span>)
           .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'y-axis-label'</span>)
           .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'rotate(-90)'</span>)
           .attr(<span class="hljs-string">'y'</span>, <span class="hljs-number">-45</span>)
           .attr(<span class="hljs-string">'x'</span>, -context.getChartHeight * <span class="hljs-number">0.5</span> + context.getMargins.top)
           .style(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'end'</span>)
           .text(context.getyAxisLabel);
    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Updates the y-axis on chart by rebuilding it. Used when
properties on a chart are changed that requires axis rebuild.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function Updates the up the y-axis
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateYAxis(context) {
    context.element
           .select(<span class="hljs-string">'svg'</span>)
           .selectAll(<span class="hljs-string">'g .y.axis'</span>)
           .call(context.yAxis);

    context.element.select(<span class="hljs-string">'.y-axis-label'</span>)
           .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'y-axis-label'</span>)
           .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'rotate(-90)'</span>)
           .attr(<span class="hljs-string">'y'</span>, <span class="hljs-number">-45</span>)
           .attr(<span class="hljs-string">'x'</span>, -context.getChartHeight * <span class="hljs-number">0.5</span> + context.getMargins.top)
           .style(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'end'</span>)
           .text(context.getyAxisLabel);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Updated the x-axis on chart by rebuilding it. Used when
properties on a chart are changed that requires axis rebuild.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateXAxis
  @description Updates the up the x-axis scale
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateXAxis(context) {
    context.element
           .select(<span class="hljs-string">'svg'</span>)
           .selectAll(<span class="hljs-string">'g .x.axis'</span>)
           .call(context.xAxis);
    context.element.select(<span class="hljs-string">'.x-axis-label'</span>)
           .attr(<span class="hljs-string">'x'</span>, context.getChartWidth * <span class="hljs-number">0.5</span>)
           .attr(<span class="hljs-string">'y'</span>, <span class="hljs-number">35</span>)
           .style(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'middle'</span>)
           .text(context.getxAxisLabel);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Updates the chart’s font size on the svg
Used when the font size changes that requires a re-render</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateFontSize
  @description Updates the chart's font size on the svg
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateFontSize(context) {
    context.element.select(<span class="hljs-string">'svg'</span>)
           .attr(<span class="hljs-string">'font-size'</span>, context.getFontSize);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Updates the chart’s font style on the svg
Used when the font style changes that requires a re-render</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateFontStyle
  @description Updates the chart's font style on the svg
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateFontStyle(context) {
    context.element.select(<span class="hljs-string">'svg'</span>)
           .style(<span class="hljs-string">'font-family'</span>, context.getFontStyle);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Updates the chart’s title on the svg
Used when the title changes that requires a re-render</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function updateTitle
  @description Updates the chart's title on the svg
  @param {Object} context (chart instance)
  @returns {Object} context (chart instance)
  */</span>

  updateTitle(context) {
    context.element.select(<span class="hljs-string">'.title'</span>)
            .text(context.getTitle);

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Sets the xScale for chart.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function setXscale
  @description Sets the xScale for chart. Checks for the type of scale passed in, and builds the scale accordingly. Then depending on whether we are using the ordinal scale or linear scale, we map the data to the scale accordingly.
  @param {Object} context (chart instance)
  @param {String} type Type of scale (ordinal vs. linear)
  @param {String} dataDomain Type of data to map the scale to (String vs. Number)
  @returns {Object} context (chart instance)
  */</span>

  setXscale(context, type, dataDomain) {</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>If check for the type of axis and build accordingly.
In addition, we use helper functions to get the column name
and set it to be the axis label.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'ordinal'</span>) {
      context.xColumnName = utils.getFirstOrdinalColumn(context.data);
      context.setxAxisLabel = context.xColumnName;
      context.xScale = d3.scale.ordinal()
                      .rangeRoundBands([<span class="hljs-number">0</span>, context.getChartWidth], <span class="hljs-number">0.1</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'linear'</span>) {
      context.xColumnName = utils.getFirstLinearColumn(context.data);
      context.setxAxisLabel = context.xColumnName;
      context.xScale = d3.scale.linear()
                      .range([context.getChartWidth, <span class="hljs-number">0</span>]);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>We map the x-axis scale domain to the data. How the mapping
is done various depending on whether we have string (ordinal)
values or Number (linear) values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">if</span> (dataDomain === <span class="hljs-string">'string'</span>) {
      context.xScale.domain(context.data.map(d =&gt; { <span class="hljs-keyword">return</span> d[context.xColumnName]; }));
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dataDomain === <span class="hljs-string">'number'</span>) {
      context.xScale.domain([<span class="hljs-number">0</span>, d3.max(context.data, d =&gt; { <span class="hljs-keyword">return</span> d[context.xColumnName]; })]);
    }

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Sets the yScale for chart.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function setYscale
  @description Sets the yScale for chart. Checks for the type of scale passed in, and builds the scale accordingly. Then depending on whether we are using the ordinal scale or linear scale, we map the data to the scale accordingly.
  @param {Object} context (chart instance)
  @param {String} type Type of scale (ordinal vs. linear)
  @param {String} dataDomain Type of data to map the scale to (String vs. Number)
  @returns {Object} this (chart instance)
  */</span>

  setYscale(context, type, dataDomain) {</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>If check for the type of axis and build accordingly.
In addition, we use helper functions to get the column name
and set it to be the axis label.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'ordinal'</span>) {
      context.yColumnName = utils.getFirstOrdinalColumn(context.data);
      context.setyAxisLabel = context.yColumnName;
      context.yScale = d3.scale.linear()
                      .range([context.getChartHeight, <span class="hljs-number">0</span>]);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'linear'</span>) {
      context.yColumnName = utils.getFirstLinearColumn(context.data);
      context.setyAxisLabel = context.yColumnName;
      context.yScale = d3.scale.linear()
                      .range([context.getChartHeight, <span class="hljs-number">0</span>]);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>We map the y-axis scale domain to the data. How the mapping
is done various depending on whether we have string (ordinal)
values or Number (linear) values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (dataDomain === <span class="hljs-string">'string'</span>) {
      context.yScale.domain(context.data.map(d =&gt; { <span class="hljs-keyword">return</span> d[context.yColumnName]; }));
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dataDomain === <span class="hljs-string">'number'</span>) {
      context.yScale.domain([<span class="hljs-number">0</span>, d3.max(context.data, d =&gt; { <span class="hljs-keyword">return</span> d[context.yColumnName]; })]);
    }

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Sets style properties for chart axis</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function
  @description Sets style properties for chart axis
  @param {Object} context (chart instance)
  @param {String} part The part of the axis we are generating
  @param {String} fill Fill color of axis
  @param {String} stroke Stroke style of axis
  @param {String} shapeRerendering Style property to make the axis line thinner
  @returns {Object} this (chart instance)
  */</span>

  setAxisStyle(context, part, fill, stroke, shapeRerendering) {
    context.svg.selectAll(<span class="hljs-string">'.axis'</span>).selectAll(part)
           .style({
             fill: fill,
             stroke: stroke,
             <span class="hljs-string">'shape-rendering'</span>: shapeRerendering,
           });

    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Creates an ordinal color scale according to categories passed in</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function convertColorsToScale
  @description Creates an ordinal color scale according to categories passed in
  @param {Object} context (chart instance)
  @param {Array} categories (Data to be mapped to by scale)
  @returns {Object} this (chart instance)
  */</span>
  convertColorsToScale(context, categories) {
    context._colorScale = d3.scale.ordinal()
                            .domain(categories)
                            .range(context.getColors);
    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Creates tooltips on chart</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function createToolTip
  @description Creates tooltips on chart
  @param {Object} context (chart instance)
  @returns {Object} this (chart instance)
  */</span>

  createToolTip(context) {
    context.tooltip = d3.select(<span class="hljs-string">'body'</span>)
                      .append(<span class="hljs-string">'div'</span>)
                      .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'tooltip'</span>)
                      .style({
                        <span class="hljs-string">'position'</span>: <span class="hljs-string">'absolute'</span>,
                        <span class="hljs-string">'color'</span>: <span class="hljs-string">'black'</span>,
                        <span class="hljs-string">'text-align'</span>: <span class="hljs-string">'center'</span>,
                        <span class="hljs-string">'width'</span>: <span class="hljs-string">'120px'</span>,
                        <span class="hljs-string">'padding'</span>: <span class="hljs-string">'5px'</span>,
                        <span class="hljs-string">'font'</span>: <span class="hljs-string">'12px Arial'</span>,
                        <span class="hljs-string">'background'</span>: <span class="hljs-string">'#f2f2f2'</span>,
                        <span class="hljs-string">'border'</span>: <span class="hljs-string">'1px'</span>,
                        <span class="hljs-string">'opacity'</span>: <span class="hljs-string">'0'</span>,
                        <span class="hljs-string">'border-color'</span>: <span class="hljs-string">'#606060'</span>,
                        <span class="hljs-string">'border-style'</span>: <span class="hljs-string">'solid'</span>,
                        <span class="hljs-string">'border-radius'</span>: <span class="hljs-string">'1px'</span>,
                        <span class="hljs-string">'cursor'</span>: <span class="hljs-string">'pointer'</span>,
                      });</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Turns on visibility of tooltip</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">show</span>(<span class="hljs-params">time = 200</span>) </span>{
      <span class="hljs-keyword">this</span>.transition()
          .duration(time)
          .style(<span class="hljs-string">'opacity'</span>, <span class="hljs-number">1</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Turns off visibility of tooltip</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hide</span>(<span class="hljs-params">time = 200</span>) </span>{
      <span class="hljs-keyword">this</span>.transition()
          .duration(time)
          .style(<span class="hljs-string">'opacity'</span>, <span class="hljs-number">0</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Determines the location the tooltip should render
Sets the content of the tooltip</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setContent</span>(<span class="hljs-params">content = 'Tooltip'</span>) </span>{
      <span class="hljs-keyword">this</span>.html(() =&gt; {
        <span class="hljs-keyword">return</span> content;
      })
      .style(<span class="hljs-string">'left'</span>, (d3.event.pageX + <span class="hljs-string">'px'</span>))
      .style(<span class="hljs-string">'top'</span>, (d3.event.pageY + <span class="hljs-string">'px'</span>));
    }

    context.tooltip.show = show;
    context.tooltip.hide = hide;
    context.tooltip.setContent = setContent;
    <span class="hljs-keyword">return</span> context;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Creates legend on chart</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-comment">/*
  @private
  @function createLegend
  @description Creates legend on chart
  @param {Object} context (chart instance)
  @returns {Object} this (chart instance)
  */</span>

  createLegend(context) {
    context.legend = context.svg.append(<span class="hljs-string">'g'</span>)
      .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'legend'</span>)
      .selectAll(<span class="hljs-string">'.legend-data'</span>)
      .data(context.getColorScale.domain())
      .enter().append(<span class="hljs-string">'g'</span>)
      .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'legend-data'</span>)
      .attr(<span class="hljs-string">'transform'</span>, (d, i) =&gt; { <span class="hljs-keyword">return</span> <span class="hljs-string">'translate(0,'</span> + i * <span class="hljs-number">20</span> + <span class="hljs-string">')'</span>; });

    context.legend.append(<span class="hljs-string">'rect'</span>)
      .attr(<span class="hljs-string">'x'</span>, context.getChartWidth - <span class="hljs-number">18</span>)
      .attr(<span class="hljs-string">'width'</span>, <span class="hljs-number">18</span>)
      .attr(<span class="hljs-string">'height'</span>, <span class="hljs-number">18</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Setting colors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      .style(<span class="hljs-string">'fill'</span>, context.getColorScale);</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>append the name of ordinal data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    context.legend.append(<span class="hljs-string">'text'</span>)
      .attr(<span class="hljs-string">'x'</span>, context.getChartWidth - <span class="hljs-number">24</span>)
      .attr(<span class="hljs-string">'y'</span>, <span class="hljs-number">12</span>)
      .style(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'end'</span>)
      .text((d) =&gt; { <span class="hljs-keyword">return</span> d; });

    <span class="hljs-keyword">return</span> context;
  },


};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Internal;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
