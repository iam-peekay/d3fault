<!DOCTYPE html>

<html>
<head>
  <title>DonutChart.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="ChartMain.html">
                  ChartMain.js
                </a>
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="InternalBarLeft.html">
                  InternalBarLeft.js
                </a>
              
                
                <a class="source" href="internal.html">
                  internal.js
                </a>
              
                
                <a class="source" href="internalArea.html">
                  internalArea.js
                </a>
              
                
                <a class="source" href="internalBar.html">
                  internalBar.js
                </a>
              
                
                <a class="source" href="internalDonutChart.html">
                  internalDonutChart.js
                </a>
              
                
                <a class="source" href="internalLine.html">
                  internalLine.js
                </a>
              
                
                <a class="source" href="internalScatter.html">
                  internalScatter.js
                </a>
              
                
                <a class="source" href="internalWaffle.html">
                  internalWaffle.js
                </a>
              
                
                <a class="source" href="AreaChart.html">
                  AreaChart.js
                </a>
              
                
                <a class="source" href="BarChart.html">
                  BarChart.js
                </a>
              
                
                <a class="source" href="BarChartLeft.html">
                  BarChartLeft.js
                </a>
              
                
                <a class="source" href="DonutChart.html">
                  DonutChart.js
                </a>
              
                
                <a class="source" href="LineChart.html">
                  LineChart.js
                </a>
              
                
                <a class="source" href="ScatterChart.html">
                  ScatterChart.js
                </a>
              
                
                <a class="source" href="WaffleChart.html">
                  WaffleChart.js
                </a>
              
                
                <a class="source" href="charts.html">
                  charts.js
                </a>
              
                
                <a class="source" href="data.html">
                  data.js
                </a>
              
                
                <a class="source" href="errors.html">
                  errors.js
                </a>
              
                
                <a class="source" href="themes.html">
                  themes.js
                </a>
              
                
                <a class="source" href="utils.html">
                  utils.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>DonutChart.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*
This is required for d3 to load.
*/</span>
<span class="hljs-comment">/*  global d3  */</span>

<span class="hljs-keyword">import</span> { ChartMain } <span class="hljs-keyword">from</span> <span class="hljs-string">'../core/ChartMain'</span>;
<span class="hljs-keyword">import</span> Internal <span class="hljs-keyword">from</span> <span class="hljs-string">'../internalCharts/internal'</span>;
<span class="hljs-keyword">import</span> InternalDonut <span class="hljs-keyword">from</span> <span class="hljs-string">'../internalCharts/internalDonutChart'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DonutChart</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChartMain</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">super</span>();
  }

  <span class="hljs-comment">/*
  @private
  @function build
  @description Builds up the Donut chart
  @returns {Object} this (chart instance)
  */</span>
  build() {
    <span class="hljs-comment">/*
    Calls each of the methods on Internal and InternalDonut object necessary to build up all the components of the chart. Internal holds all the methods that do d3 manipulation to create and update various parts of the chart
    */</span>
    Internal.selectElement(<span class="hljs-keyword">this</span>);
    Internal.getParentDimensions(<span class="hljs-keyword">this</span>);
    Internal.getChartDimensions(<span class="hljs-keyword">this</span>);
    Internal.createSVGElement(<span class="hljs-keyword">this</span>);
    Internal.createToolTip(<span class="hljs-keyword">this</span>);
    InternalDonut.updateStyle(<span class="hljs-keyword">this</span>);
    InternalDonut.updateOrdinalColumn(<span class="hljs-keyword">this</span>);
    Internal.convertColorsToScale(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.data.map(d =&gt; { <span class="hljs-keyword">return</span> d[<span class="hljs-keyword">this</span>.ordinalColumn]; }));
    InternalDonut.updateLinearColumn(<span class="hljs-keyword">this</span>);
    InternalDonut.convertData(<span class="hljs-keyword">this</span>);
    InternalDonut.updateRadius(<span class="hljs-keyword">this</span>);
    InternalDonut.updateArc(<span class="hljs-keyword">this</span>);
    InternalDonut.updatePie(<span class="hljs-keyword">this</span>);
    InternalDonut.buildChartComponents(<span class="hljs-keyword">this</span>);
    InternalDonut.updateTitle(<span class="hljs-keyword">this</span>);
    Internal.createLegend(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-comment">/*
  @private
  @function updateChartComponents
  @description Calls InternalDonut to update the Donut on chart
  @returns {Object} this (chart instance)
  */</span>
  updateChartComponents() {
    <span class="hljs-comment">/* Calls method on InternalDonut to recreate all the chart components. Used to reflect any changes made to property values (e.g. font-size, axis-label, etc.)
    */</span>
    InternalDonut.updateChartComponents(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-comment">/*
  @private
  @function updateColors
  @description Calls InternalDonut to update color of Donut chart after initial render
  @returns {Object} this Chart object
  */</span>
  updateColors() {
    InternalDonut.updateChartComponents(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-comment">/*
  @private
  @function updateMargins
  @description Updates the chart's margin on the element itself
  @returns {Object} this Chart object
  */</span>

  updateMargins() {
    <span class="hljs-keyword">this</span>.updateHeight();
    <span class="hljs-keyword">this</span>.updateWidth();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-comment">/*
  @private
  @function updateWidth
  @description Updates the chart's width on the element itself
  @returns {Object} this Chart object
  */</span>
  updateWidth() {
    Internal.updateSVGElement(<span class="hljs-keyword">this</span>);
    InternalDonut.updateRadius(<span class="hljs-keyword">this</span>);
    InternalDonut.updateArc(<span class="hljs-keyword">this</span>);
    InternalDonut.updatePie(<span class="hljs-keyword">this</span>);
    InternalDonut.updateChartComponents(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-comment">/*
  @private
  @function updateHeight
  @description Updates the chart's height on the element itself
  @returns {Object} this Chart object
  */</span>
  updateHeight() {
    Internal.updateSVGElement(<span class="hljs-keyword">this</span>);
    InternalDonut.updateRadius(<span class="hljs-keyword">this</span>);
    InternalDonut.updateArc(<span class="hljs-keyword">this</span>);
    InternalDonut.updatePie(<span class="hljs-keyword">this</span>);
    InternalDonut.updateChartComponents(<span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

  <span class="hljs-comment">/*
  @private
  @function setColors
  @description Overrides the default ChartMain setColors setter - maps to an ordinal scale
  @param {Array} colors Array of colors to update the chart to
  */</span>

  set setColors(newColors) {
    <span class="hljs-keyword">this</span>._colors = newColors;
    Internal.convertColorsToScale(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.data.map(d =&gt; { <span class="hljs-keyword">return</span> d[<span class="hljs-keyword">this</span>.ordinalColumn]; }));
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }

}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
